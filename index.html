<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        function get(url) {
            // Return a new promise.
            return new Promise(function(resolve, reject) {
                // Do the usual XHR stuff
                var req = new XMLHttpRequest();
                req.open('GET', url);

                req.onload = function() {
                    // This is called even on 404 etc
                    // so check the status
                    if (req.status == 200) {
                        // Resolve the promise with the response text
                        resolve(req.response);
                    } else {
                        // Otherwise reject with the status text
                        // which will hopefully be a meaningful error
                        reject(Error(req.statusText));
                    }
                };

                // Handle network errors
                req.onerror = function() {
                    reject(Error("Network Error"));
                };

                // Make the request
                req.send();
            });
        }

        function getJSON(url) {
            return get(url).then(JSON.parse);
        }



        const promise1 = () => {
            return getJSON("https://jsonplaceholder.typicode.com/todos/1");
        }

        const promise2 = () => {
            return getJSON("https://jsonplaceholder.typicode.com/todos/x2");
        }
        const promise3 = () => {
            return getJSON("https://jsonplaceholder.typicode.com/todos/3");
        }
        const promise4 = () => {
            return getJSON("https://jsonplaceholder.typicode.com/todos/4");
        }
        const promise5 = () => {
            return getJSON("https://jsonplaceholder.typicode.com/todos/5");
        }


        promise1().then(function(response) {
            console.log("promise2", response)
            return promise2();
        }).then(function(response) {
            console.log("promise3", response)
            return promise3();
        }).catch(function(err) {
            console.log("error 1", err)
            return ("error 1", err)
                //return promise1()

            // return asyncRecovery1("https://jsonplaceholder.typicode.com/todos/4");
        }).then(function(response) {
            console.log("promise4", response)
            return promise4();
        }, function(err) {
            console.log("error 2", err)
            return ("error 2", err)
                //return asyncRecovery2();
        }).catch(function(err) {
            console.log("Don't worry about it");
        }).then(function(response) {
            console.log("promise5", response)
            console.log("All done!");
        })
    </script>
</body>


</html>